/*!
Modal
The default modal component does not include any interior padding to
accomodate modals with sections that expand to the edges of the component.
The `.modal-padded` modifier adds standard padding.
The `.modal-fixed` modifier adds `position: fixed` with the result
that the modal stays in place when the page is scrolled.
.modal-padded - A variant with padding.
Styleguide 8.1
*/
@require "~@walmart/wmreact-base/src/styles/base";
@require "~@walmart/wmreact-interactive/src/styles/button";

$modal-color ?= {
  border: $blue,
  bg-close: $blue
}

// This is the slide-tray treatment for both modal and flyout, apply .slide-tray
// class to either component to get slide-up tray behavior

.slide-tray {
  wmzindex("slide-tray", true);

  animation: slide-from-bottom 0.5s ease forwards !important;  // @stylint ignore

  position: fixed !important; // @stylint ignore
  overflow: scroll;
  left: 0 !important; // @stylint ignore
  right: 0 !important; // @stylint ignore
  top: 0 !important; // @stylint ignore
  bottom: 0 !important; // @stylint ignore

  width: 100% !important; // @stylint ignore
  height: 100% !important; // @stylint ignore

  margin: 0 !important; // @stylint ignore

  border-radius: 0!important; // @stylint ignore
  border: none !important; // @stylint ignore

  &.remove {
    animation: slide-from-top 0.5s ease forwards !important; // @stylint ignore
  }
}

.modal {
  wmzindex("modal");

  // TODO: USFERL-916: change to fixed globally and remove modal-padded class below
  position: absolute;
  top: 110px;
  left: 50%;

  display: none;
  border: 4px solid $modal-color.border;
  border-radius: 10px;

  background: $white;

  &.active {
    display: block;
  }

  &:focus {
    outline: none;
  }

  &.slide-tray {

    .modal-close {
      display: none;
    }
  }
}

.slide-panel-prevent-scroll {
  .modal {
    wmzindex("slide-panel-modal");
  }
}

+breakpoint($screen-l) {
  .modal {
    width: 960px;
    margin-left: -(@width/2);
  }

  &.slide-tray {
    width: 100%;
    margin-left: 0;
  }
}

+breakpoint($screen-m-max, "max") {
  .modal {
    left: 20px;
    right: 20px;
  }

  &.slide-tray {
    width: 100%;
    margin-left: 0;
  }
}

.modal-padded {
  padding: 40px 30px 30px;
}

.modal-fixed {
  position: fixed;
}

.modal-close {
  // Give close button stacking context on top of modal contents.
  wmzindex("basic");

  position: absolute;
  top: -14px;
  right: -14px;

  width: 32px;
  height: @width;
  padding: 0;
  border: 0;
  border-radius: 50%;

  background-color: $modal-color.bg-close;
  color: $white;
  cursor: pointer;
  font-size: 18px;
  font-weight: 700;
  line-height: @height;
}

.modal-backdrop {
  wmzindex("modal");

  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  display: none;

  background: $white;
  opacity: .6;

  &.active {
    display: block;
  }

  &.close-on-click {
    cursor: pointer;
  }
}

.slide-panel-prevent-scroll {
  .modal-backdrop {
    wmzindex("slide-panel-modal-backdrop");
  }
}

.modal-prevent-double-scroll {
  // This class is used by our modal JS modules. It gets applied to `body` to
  // disable page scrolling when modals are visible.
  overflow: hidden;

  +breakpoint($breakpoint-s-max, "max") {
    .touch & {
      // http://stackoverflow.com/questions/26288938/mobile-android-ios-browsers-are-ignoring-overflow-hidden-on-body-html-and
      position: fixed;
    }
  }
}

  // modal alert
.modal-alert .modal-message {
  margin: 40px 30px 0;
  font-size: 20px;
  font-weight: 400;
}

.modal-alert .modal-alert-actions {
  text-align: right;
  padding: 1rem;
}
